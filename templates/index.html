<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ibaloi NLP | Digital Lexicon & Research</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='icons/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='icons/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='icons/favicon-16x16.png') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: '#4a3b76',
                        secondary: '#6d5b9a',
                        accent: '#a991f0',
                        dark: '#1a1a2e',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-50 text-slate-800 antialiased selection:bg-primary selection:text-white">
    <nav class="fixed top-0 w-full z-50 glass-nav transition-all duration-300 max" id="navbar"></nav>
    <header class="hero relative pt-32 pb-20 lg:pt-48 lg:pb-32 px-6">
        <div class="container mx-auto text-center relative z-10">
            <span class="inline-block py-1 px-3 rounded-full bg-white/10 border border-white/20 text-white text-xs font-semibold tracking-wider mb-6 fade-in">
                NLP RESEARCH INITIATIVE
            </span>
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-6 leading-tight fade-in delay-100">
                Preserving <span class="text-accent">Ibaloi</span> through<br>
                Neural Processing.
            </h1>
            <p class="text-lg md:text-xl text-slate-200 max-w-2xl mx-auto mb-10 fade-in delay-200 font-light">
                A digital lexicon and sentence construction system powered by LLM technology to enhance language accessibility and preservation.
            </p>

            <div class="max-w-xl mx-auto bg-white p-2 rounded-full shadow-2xl flex items-center gap-2 fade-in delay-300 transform transition-transform hover:scale-[1.02]">
                <div class="pl-4 text-slate-400">
                    <i data-feather="search" class="w-5 h-5"></i>
                </div>
                <input type="text" id ="general-search2" placeholder="Search the Ibaloi Lexicon..." class="sync-input w-full bg-transparent border-none outline-none text-slate-700 placeholder-slate-400 h-10">
                <button id="search-btn" class="bg-primary hover:bg-secondary text-white px-6 py-2 rounded-full font-medium transition-colors">
                    Search
                </button>
            </div>
        </div>
    </header>
    <section id="table"></section>
    <main class="container mx-auto px-6 py-16 -mt-10 relative z-20">
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-20">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center hover:shadow-md transition-all">
                <h3 class="text-2xl font-bold text-primary mb-1">1,500+</h3>
                <p class="text-sm text-slate-500 uppercase tracking-wide">Lexicon Entries</p>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center hover:shadow-md transition-all">
                <h3 class="text-2xl font-bold text-primary mb-1">00.0% Gemini 2.5</h3>
                <p class="text-sm text-slate-500 uppercase tracking-wide">Translator Accuracy</p>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center hover:shadow-md transition-all">
                <h3 class="text-2xl font-bold text-primary mb-1">00.0% BLEU</h3>
                <p class="text-sm text-slate-500 uppercase tracking-wide">Lexicon Accuracy</p>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 text-center hover:shadow-md transition-all">
                <h3 class="text-2xl font-bold text-primary mb-1">MoE</h3>
                <p class="text-sm text-slate-500 uppercase tracking-wide">LLM Architecture</p>
            </div>
        </div>
        
        <section id="research" class="mb-24 scroll-mt-20">
            <div class="flex flex-col md:flex-row gap-12 items-center">
                <div class="w-full md:w-1/2">
                    <h2 class="text-3xl font-bold text-slate-800 mb-6">Bridging Tradition with Technology</h2>
                    <p class="text-slate-600 mb-6 leading-relaxed">
                        Our research focuses on the development of a low-resource language model for Ibaloi. Utilizing the <strong>Gemini 2.5 Open Source framework</strong>, we have developed a generative approach translation and lexicon extraction pipeline.
                    </p>
                    <ul class="space-y-4 mb-8">
                        <li class="flex items-start gap-3">
                            <i data-feather="check-circle" class="text-primary mt-1"></i>
                            <span class="text-slate-700">Custom Entity Extraction for Ibaloi Dialects</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i data-feather="check-circle" class="text-primary mt-1"></i>
                            <span class="text-slate-700">Morphological Analysis of Prefixes/Suffixes</span>
                        </li>
                    </ul>
                    <a href="/research-paper" class="inline-flex items-center text-primary font-semibold hover:text-secondary group">
                        Read the Full Paper <i data-feather="arrow-right" class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                    </a>
                </div>
                <div class="w-full md:w-1/2">
                    <div class="bg-gradient-to-br from-primary to-secondary p-1 rounded-2xl shadow-2xl rotate-1 hover:rotate-0 transition-transform duration-500">
                        <a href="/research-paper">
                            <div class="bg-white rounded-xl p-8 overflow-hidden">
                                <div class="flex items-center justify-between mb-4 border-b pb-4">
                                    <span class="text-xs font-bold text-slate-400">PAPER ABSTRACT</span>
                                    <span class="text-xs text-slate-400">2025   </span>
                                </div>
                                <h3 class="text-xl font-bold mb-3">Constructing a Structured Ibaloi Lexicon through Digital Resource Collection</h3>
                                <p class="text-sm text-slate-500 leading-relaxed">
                                This study proposed an attempt to further enrich understanding and usage of the Ibaloi language using Natural Language Processing, precisely, the machine translation and language inference part. A lexicon is created using both secondary sources over the internet and a first-hand list of sentences that was interpreted and written by Ibaloi users. Doing so, the resources aim to provide insights on integration of NLP to languages and dialects so as to preserve them through usage. 
                                </p>
                                <div class="mt-6 flex gap-2">
                                    <span class="px-2 py-1 bg-slate-100 text-xs rounded text-slate-600">#Ibaloi</span>
                                    <span class="px-2 py-1 bg-slate-100 text-xs rounded text-slate-600">#Lexicon</span>
                                    <span class="px-2 py-1 bg-slate-100 text-xs rounded text-slate-600">#NLP</span>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="tools">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-800">Interactive Tools</h2>
                <p class="text-slate-500 mt-2">Explore the three core modules of our research.</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <a href="/lexicon-browse" class="card group bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:border-primary/20 transition-all">
                    <div class="w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center text-primary mb-6 group-hover:bg-primary group-hover:text-white transition-colors">
                        <i data-feather="list"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-3">Digital Lexicon</h3>
                    <p class="text-slate-500 text-sm leading-relaxed mb-6">
                        Access our comprehensive database of Ibaloi words, including morphological variations and contextual usage examples.
                    </p>
                    <span class="text-sm font-semibold text-primary group-hover:translate-x-1 transition-transform inline-block">Browse Dictionary &rarr;</span>
                </a>

                <a href="/builder" class="card group bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:border-primary/20 transition-all">
                    <div class="w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600 mb-6 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        <i data-feather="layers"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-3">Sentence Builder</h3>
                    <p class="text-slate-500 text-sm leading-relaxed mb-6">
                        Construct ibaloi sentences for preserving indigeneous language, join the crowdsourcing movement!
                    </p>
                    <span class="text-sm font-semibold text-blue-600 group-hover:translate-x-1 transition-transform inline-block">Start Building &rarr;</span>
                </a>

                <a href="/rasa-translator" class="card group bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:border-primary/20 transition-all">
                    <div class="w-12 h-12 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors">
                        <i data-feather="message-square"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-3">LexiconLM Translator</h3>
                    <p class="text-slate-500 text-sm leading-relaxed mb-6">
                        Test our translation model. Input English phrases and see how the Lexicon+LLM pipeline interprets and translates them.
                    </p>
                    <span class="text-sm font-semibold text-indigo-600 group-hover:translate-x-1 transition-transform inline-block">Launch Translator &rarr;</span>
                </a>
            </div>
        </section>

    </main>
    <footer class="bg-slate-900 text-slate-300 py-12 mt-12" id="footer"></footer>
    <script>
    // Initialize Icons
    feather.replace();

    // 1. SAFELY Handle Navbar Scroll Effect
    const nav = document.getElementById('navbar');
    // Define navLinks (It was missing in your original code)
    const navLinks = document.querySelectorAll('.nav-link'); // Adjust selector as needed

    window.addEventListener('scroll', () => {
        if (window.scrollY > 20) {
            nav.classList.add('shadow-md', 'bg-white/90', 'backdrop-blur-md');
            nav.classList.remove('bg-transparent');
            
            if(navLinks.length > 0) {
                navLinks.forEach(el => {
                    el.classList.remove('text-white');
                    el.classList.add('text-slate-800');
                });
            }
        } else {
            nav.classList.remove('shadow-md', 'bg-white/90', 'backdrop-blur-md');
            nav.classList.add('bg-transparent');

            if(navLinks.length > 0) {
                navLinks.forEach(el => {
                    el.classList.remove('text-slate-800');
                    el.classList.add('text-white');
                });
            }
        }
    });

    // 2. SAFELY Handle Mobile Menu (Check if it exists first)
    const btn = document.getElementById('mobile-menu-btn');
    const menu = document.getElementById('mobile-menu');
    if (btn && menu) {
        btn.addEventListener('click', () => {
            menu.classList.toggle('hidden');
        });
    }

    // 3. Fetch Logic
    fetch("/lexicon")
        .then(res => res.text())
        .then(html => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            // Ensure the container exists in the fetched HTML
            const tableBlock = doc.getElementById('main-container'); 
            
            if (tableBlock) {
                document.getElementById("table").appendChild(tableBlock);
                
                // Load the script AFTER the HTML is appended
                const s = document.createElement("script");
                s.src = "{{ url_for('static', filename='lexicon/script.js') }}";
                document.body.appendChild(s);
            } else {
                console.error("Could not find #main-container in fetched content");
            }
        })
        .catch(err => console.error("Error loading lexicon:", err));

    // Hide table initially
    document.getElementById("table").style.display = 'none';

    // 4. FIXED Search Logic
    const searchButton = document.getElementById('search-btn');
    const heroInput = document.getElementById('general-search2');

    searchButton.addEventListener('click', () => {
        const tableSection = document.getElementById('table');
        const targetInput = document.getElementById('general-search'); // The input inside the fetched table

        // Reveal the table
        tableSection.style.display = 'block';

        if (targetInput) {
            // Transfer the value
            targetInput.value = heroInput.value;

            // MANUALLY dispatch the event so the table script detects the change
            const event = new Event('input', { bubbles: true });
            targetInput.dispatchEvent(event);
            
            // Also trigger keyup in case the script listens for that
            const keyUpEvent = new KeyboardEvent('keyup', {'key': 'Enter'});
            targetInput.dispatchEvent(keyUpEvent);
        } else {
            console.warn("Table search input not loaded yet.");
        }

        // Scroll to table
        location.href = '#table';
    });

    // Enter key support
    heroInput.addEventListener('keypress', e => {
        if (e.key === 'Enter') {
            searchButton.click();
        }
    });
</script>
</body>
</html>